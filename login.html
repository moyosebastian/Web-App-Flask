<html>
<head>
<link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<title>Sebastian's Auto</title>
</head>
<body>

    <h1>Auto-Man</h1>
<div class="container">
<h2>Login</h2>

<p class="error"></p>

<form>
<input type="text" name="username" placeholder="Username" required>
<input type="password" name="password" placeholder="Password" required>
<button type="button" id="login_button">Login</button>
</form>


<a href="/register">Create Account</a>
</div>

<script>
$(document).ready(function() {
    $('#login_button').click(function() {
        const username = $('input[name="username"]').val();
        const password = $('input[name="password"]').val();

        $.ajax({
            url: 'http://127.0.0.1:5000/authenticate',
            type: 'POST',
            data: {
                username: username,
                password: password
            },
            success: function(response) {
                if (response === "success") {
                    window.location.href = '{{url_for("welcome_page")}}';
                } else {
                    alert('Login failed: ' + response.message);
                    $(".error").text('Incorrect login details');
                }
            },
            error: function() {
                alert('An error occurred while processing your request.');
            }
        });
    });
});
</script>
</body>
</html>